{% extends "base.html" %}

{% block title %}{{ post.title }} | Ecobank{% endblock %}

{% block meta %}
    <meta name="description" content="{{ post.summary|default(post.title) }}">
    <meta name="author" content="{{ post.author }}">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:title" content="{{ post.title }}">
    <meta property="og:description" content="{{ post.summary|default(post.title) }}">
    {% if post.thumbnail %}
        <meta property="og:image" content="{{ post.thumbnail }}">
    {% else %}
        <meta property="og:image" content="{{ url_for('static', filename='img/ecobank-cover.jpg', _external=True) }}">
    {% endif %}

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{{ request.url }}">
    <meta property="twitter:title" content="{{ post.title }}">
    <meta property="twitter:description" content="{{ post.summary|default(post.title) }}">
    {% if post.thumbnail %}
        <meta property="twitter:image" content="{{ post.thumbnail }}">
    {% else %}
        <meta property="twitter:image" content="{{ url_for('static', filename='img/ecobank-cover.jpg', _external=True) }}">
    {% endif %}
{% endblock %}

{% block content %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">

    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('main.hive_user_blog', username=author) }}">@{{ author }}</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ title or permlink }}</li>
        </ol>
    </nav>

    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <h2>{{ post.title }}</h2>
            <p class="text-muted">
                {{ _('By') }} <a href="{{ url_for('main.hive_user_blog', username=author) }}">@{{ author }}</a>
                {% if post.ecobank_metadata and post.ecobank_metadata.author_username %}
                    <br><span class="text-secondary">{{ _('Originally by') }} <strong>@{{ post.ecobank_metadata.author_username }}</strong></span>
                {% endif %}
                | {{ post.created }}
                {% if community %}
                    | {{ _('Community:') }} {{ community }}
                {% endif %}
            </p>

            <hr>

            <div class="post-content">
                {{ post.body | markdown | safe }}
            </div>
        </div>
        <div class="card-footer text-muted">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    {% for tag in tags %}
                        <a href="{{ url_for('main.hive_tag_feed', tag=tag) }}" class="badge bg-secondary rounded-pill text-decoration-none">#{{ tag }}</a>
                    {% endfor %}
                </div>                        <div class="d-flex gap-2">
                    <a href="https://peakd.com/@{{ author }}/{{ permlink }}" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-outline-info">{{ _('Open in PeakD') }}</a>
                    <a href="https://ecency.com/@{{ author }}/{{ permlink }}" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-outline-info">{{ _('Open in Ecency') }}</a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
{% endblock %}
