{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center mb-4">
    <div class="col-md-8">
        <div class="card bg-light border-info">
            <div class="card-body d-flex justify-content-between align-items-center">
                <h5 class="mb-0">{{ _('Account Credits') }}: <strong>{{ user.account_credits }}</strong></h5>
                <a href="{{ url_for('account.buy_credits') }}" class="btn btn-sm btn-success">{{ _('Buy More') }}</a>
            </div>
        </div>
    </div>
</div>

<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h3>{{ _('Edit Profile') }}</h3>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="mb-3">
                        <label class="form-label">{{ _('Username') }}</label>
                        <input type="text" class="form-control" value="{{ user.username }}" disabled readonly>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">{{ _('Email') }}</label>
                        <input type="email" class="form-control" value="{{ user.email }}" disabled readonly>
                    </div>

                    <div class="mb-3">
                        <label for="locale" class="form-label">{{ _('Language / Idioma') }}</label>
                        <select class="form-select" id="locale" name="locale">
                            <option value="en" {% if user.locale == 'en' %}selected{% endif %}>English</option>
                            <option value="es" {% if user.locale == 'es' %}selected{% endif %}>Espa√±ol</option>
                        </select>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="first_name" class="form-label">{{ _('First Name') }}</label>
                            <input type="text" class="form-control" id="first_name" name="first_name" value="{{ user.first_name or '' }}">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="last_name" class="form-label">{{ _('Last Name') }}</label>
                            <input type="text" class="form-control" id="last_name" name="last_name" value="{{ user.last_name or '' }}">
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="avatar_url" class="form-label">{{ _('Avatar URL') }}</label>
                        <input type="url" class="form-control" id="avatar_url" name="avatar_url" value="{{ user.avatar_url or '' }}" placeholder="https://example.com/my-photo.jpg">
                        <div class="form-text">{{ _('Link to a public image (e.g., from ImageKit, Imgur).') }}</div>
                    </div>

                    <div class="mb-3">
                        <label for="bio" class="form-label">{{ _('Bio') }}</label>
                        <textarea class="form-control" id="bio" name="bio" rows="4">{{ user.bio or '' }}</textarea>
                        <div class="form-text">{{ _('Tell us a bit about yourself. This will appear in the "About the Author" section of your posts.') }}</div>
                    </div>

                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary">{{ _('Save Changes') }}</button>
                        <a href="{{ url_for('auth.change_password') }}" class="btn btn-outline-warning">{{ _('Change Password') }}</a>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- Preview Section -->
        <div class="card mt-4 bg-light">
            <div class="card-body">
                <h5 class="card-title text-muted">{{ _('Header Preview') }}</h5>
                <p class="small mb-3">{{ _('This is how your bio will look on posts.') }}</p>
                
                <div class="border p-3 bg-white">
                    <table>
                    <tr>
                    <td>
                    <center><img src="{{ user.avatar_url or url_for('static', filename='img/user-circle-svgrepo-com.svg') }}" style="border-radius: 50%; width: 100px; height: 100px;"/></center>
                    </td>
                    <td class="ps-3">
                    <span><h4>{{ _('About the Author') }}</h4></span>
                    <div><span><strong>{{ user.display_name }}</strong></span> - 
                    <span>{{ user.bio or _('Bio not set.') }}</span></div>
                    </td>
                    </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}